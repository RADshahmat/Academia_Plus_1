<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMS Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script> 
    <link rel="stylesheet" href="css/admin.css">
    <script src="js/admin.js" defer></script>
    <style>
        .btn-toggle label.active {
            background-color: red;
            color: white;
        }

        .btn-toggle label:not(.active) {
            background-color: white;
            color: black;
        }
    </style>
</head>
<body>
    <%- include('../includes/cp_header.ejs') %>

    <%- include('../includes/admin_sidebar.ejs') %>
    <div class="container  content" id="content-container">
        <div class="card p-4 text-center" style="width:500px;margin-left:16rem;">
            <h2>SMS</h2>

            <!-- Message Text Box -->
            <div class="form-group">
                <label for="message">Message:</label>
                <textarea class="form-control" id="message" rows="3" placeholder="Type your message here"></textarea>
            </div>

            <!-- Phone Number Input -->
            <div class="form-group">
                <label for="phoneNumber">Phone Number:</label>
                <input type="text" class="form-control" id="phoneNumber" placeholder="Enter phone number:+880">
            </div>

            <!-- Toggle Button for Teacher/Student -->
            <div class="form-group">
                <label>Select :</label>
                <select id="inputState" class="form-select">
                    <option selected>Choose...</option>
                    <option>Everyone</option><option>Teacher</option><option>Student</option><option>Selected</option>
                  </select>
            </div>

            <!-- Send Button -->
            <button class="btn btn-primary" onclick="sendMessage()">Send Message</button>

            <!-- Back Button -->
            <a href="#" class="btn btn-secondary mt-3" onclick="goBack()">Back</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
            crossorigin="anonymous"></script>

    
            <script>
                function togglePhoneNumberInput() {
                    var selectedOption = document.getElementById('inputState').value;
                    var phoneNumberGroup = document.getElementById('phoneNumberGroup');
        
                    // Toggle visibility based on the selected option
                    phoneNumberGroup.style.display = (selectedOption === 'Selected') ? 'block' : 'none';
                }
        
                function sendMessage() {
                    var message = document.getElementById('message').value;
                    var phoneNumber = document.getElementById('phoneNumber').value;
                    var selectedOption = document.getElementById('inputState').value;
        
                    // Check if message is not blank
                    if (message.trim() === '') {
                        alert('Please fill in the message before sending.');
                        return; // Exit the function if the message is blank
                    }
        
                    // Check if phone number is required and validate it
                    if (selectedOption === 'Selected') {
                        if (phoneNumber.trim() === '') {
                            alert('Please enter the phone number.');
                            return; // Exit the function if phone number is blank
                        }
                        if (!(/^\d{11}$/.test(phoneNumber))) {
                            alert('Phone number must be 11 digits.');
                            return; // Exit the function if phone number is not 11 digits
                        }
                    } else {
                        // Reset phone number if not required
                        phoneNumber = '';
                    }
        
                    // Simulate sending message (replace with actual API call)
                    alert(`Message Sent!\n\nMessage: ${message}\nPhone Number: ${phoneNumber}\nSelected Option: ${selectedOption}`);
        
                    // Reset the form fields after sending the message
                    document.getElementById('message').value = '';
                    document.getElementById('phoneNumber').value = '';
                }
        
                function goBack() {
                    window.location.href = 'admin';
                }
            </script>
    
    <!-- Bootstrap JS and Popper.js -->
    <script src="js/admin_ham_responsive.js" defer></script>
</body>
</html>
